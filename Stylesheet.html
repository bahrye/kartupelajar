<style>
  body { background-color: #f0f2f5; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
  
  /* Container Login agar lebih rapi di HP */
  .auth-box { 
    max-width: 400px; 
    width: 100%; 
    margin-top: 50px; 
  }

  /* SETUP CETAK */
  @media print {
    .no-print { display: none !important; }
    body, #dashboardPage { background-color: white; margin: 0; padding: 0; }
    .id-card { 
      break-inside: avoid; 
      page-break-inside: avoid; 
      margin: 10px; 
      border: 1px solid #000;
      /* Reset scale saat print */
      transform: none !important; 
      box-shadow: none !important;
    }
    .container { max-width: 100% !important; width: 100% !important; padding: 0 !important; }
  }

  /* BASE CARD */
  .id-card {
    width: 320px; height: 190px;
    border-radius: 8px;
    position: relative; overflow: hidden;
    background: white;
    box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    display: flex; flex-direction: column;
    /* Agar transisi scale halus */
    transform-origin: center top;
    transition: transform 0.3s ease;
  }
  .id-card .content { display: flex; align-items: center; padding: 15px; height: 100%; }
  .id-card .p-img { width: 80px; height: 100px; object-fit: cover; border: 1px solid #ddd; background: #eee; }
  .id-card .details { margin-left: 15px; font-size: 13px; line-height: 1.4; flex: 1; }
  .id-card .head-text { text-align: center; padding: 8px; font-weight: bold; text-transform: uppercase; font-size: 14px; }

  /* TEMPLATE 1: BLUE */
  .temp-blue { border: 1px solid #0d6efd; }
  .temp-blue .head-text { background: #0d6efd; color: white; }
  .temp-blue .details strong { color: #0d6efd; font-size: 16px; }

  /* TEMPLATE 2: RED */
  .temp-red { border: 1px solid #dc3545; }
  .temp-red .head-text { background: #dc3545; color: white; border-bottom: 2px solid #b02a37; }
  .temp-red .p-img { border-radius: 50%; width: 90px; height: 90px; }

  /* TEMPLATE 3: GOLD */
  .temp-gold { background: linear-gradient(135deg, #fff 60%, #fff8e1 100%); border: 2px solid #ffc107; }
  .temp-gold .head-text { background: transparent; color: #b78a02; border-bottom: 1px solid #ffc107; font-family: serif; font-size: 18px; }

  /* TEMPLATE 4: MADRASAH 1 (FINAL: OVERLAP + PLACEHOLDER) */
  .temp-madrasah {
    border: 1px solid #000;
    font-family: Arial, sans-serif;
    display: block !important;
    position: relative;
    box-sizing: border-box;
    width: 335px !important; 
    height: 220px !important; 
    background: white;
    overflow: hidden;
  }

  /* HEADER KOP */
  .temp-madrasah .madrasah-header {
    background-color: #065f28;
    color: white;
    padding: 2px 8px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 45px; 
    border-bottom: 2px solid #ffd700;
  }
  
  .temp-madrasah .logo-box { width: 40px; text-align: center; }
  .temp-madrasah .logo-box img { width: 30px; height: auto; }
  
  .temp-madrasah .header-text { flex: 1; text-align: center; line-height: 1.1; }
  .temp-madrasah .txt-yayasan { font-size: 7px; font-weight: bold; margin-bottom: 1px; }
  .temp-madrasah .txt-sekolah { font-size: 11px; font-weight: 900; text-transform: uppercase; margin: 0; }
  .temp-madrasah .txt-alamat { font-size: 6px; margin-top: 1px; }

  /* JUDUL KARTU */
  .temp-madrasah .card-title-bar {
    text-align: center; font-weight: bold; font-size: 11px;
    margin-top: 3px; margin-bottom: 2px;
    text-transform: uppercase; text-decoration: underline;
    height: 15px;
  }

  /* BODY UTAMA */
  .temp-madrasah .card-body-custom {
    display: flex;
    padding: 0 12px;
    gap: 10px;
    height: 150px; 
    align-items: flex-start;
  }

  /* --- UPDATE: FOTO SISWA DENGAN PLACEHOLDER IKON --- */
  .temp-madrasah .photo-area {
    width: 75px; height: 95px; 
    background: #ffffff; /* Ubah background jadi Putih */
    border: 1px solid #999; 
    flex-shrink: 0; margin-top: 2px;
    position: relative; z-index: 2;
    overflow: hidden;

    /* Flexbox untuk menengahkan ikon dan teks placeholder */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: #d1d1d1; /* Warna abu-abu muda untuk ikon placeholder */
  }

  /* Style untuk Foto Asli (Jika ada) */
  .temp-madrasah .photo-area img.real-photo { 
    width: 100%; 
    height: 100%; 
    
    /* UBAH DISINI: 'fill' akan memaksa gambar meregang penuh sesuai kotak */
    object-fit: fill; 
    
    position: absolute;
    top: 0; left: 0;
    z-index: 5; 
    background: white;
  }

  /* Style untuk Ikon Placeholder */
  .temp-madrasah .photo-area .ph-icon {
      font-size: 45px; /* Ukuran ikon */
      line-height: 1;
      margin-bottom: -5px;
  }
  
  /* Style untuk Teks 3X4 */
  .temp-madrasah .photo-area .ph-text {
      font-size: 10px;
      font-weight: bold;
  }

  /* PANEL KANAN */
  .temp-madrasah .right-panel {
    flex: 1; height: 100%; display: flex; flex-direction: column;
    justify-content: space-between;
  }

  /* DATA SISWA */
  .temp-madrasah .data-area { font-size: 9px; line-height: 1.2; position: relative; z-index: 2; }
  .temp-madrasah table { width: 100%; border-collapse: collapse; }
  .temp-madrasah td { padding-bottom: 2px; vertical-align: top; }
  .temp-madrasah td:first-child { width: 55px; font-weight: normal; }

  /* AREA TANDA TANGAN */
  .temp-madrasah .signature-area {
    margin-left: auto; 
    text-align: left;
    width: fit-content;
    min-width: 110px;
    font-size: 9px;
    line-height: 1.1;
    padding-bottom: 5px;
    position: relative; 
  }
  
  /* GAMBAR TTD */
  .temp-madrasah .sig-img {
    height: 40px; 
    width: auto; 
    display: block; 
    margin-bottom: -20px; 
    margin-left: -5px; 
    position: relative; 
    z-index: 2; 
  }

  /* KOTAK PLACEHOLDER */
  .temp-madrasah .sig-placeholder {
    width: 100px; height: 40px;
    border: 1px dashed #999; background-color: #f9f9f9;
    margin: 2px 0; position: relative; z-index: 1;
  }
  
  /* GAMBAR STEMPEL */
  .temp-madrasah .stamp-img {
    position: absolute; 
    width: 50px; height: auto;
    left: -20px; top: 15px;   
    z-index: 3;  opacity: 0.65; 
    transform: rotate(-8deg); 
    pointer-events: none;
  }

  .temp-madrasah .head-name { font-weight: bold; text-decoration: underline; position: relative; z-index: 1; }
  .temp-madrasah .head-nip { margin-top: 1px; position: relative; z-index: 1; }

  /* --- MOBILE RESPONSIVE TWEAKS --- */
  @media screen and (max-width: 576px) {
    /* 1. Reset Margin & Padding Container */
    .container { padding: 15px !important; }
    
    /* 2. Login Box Full Width */
    .auth-box { margin-top: 20px; box-shadow: none !important; border: 1px solid #eee; }

    /* 3. Dashboard Controls Stack ke Bawah */
    .card-body.d-flex { 
      flex-direction: column; 
      align-items: stretch !important; 
    }
    .card-body.d-flex select, 
    .card-body.d-flex button {
      width: 100% !important;
      margin-bottom: 10px;
    }
    
    /* 4. Form Config Madrasah menjadi 1 Kolom */
    #madrasahConfig .row > div { width: 100% !important; }
    #madrasahConfig .input-group { flex-direction: column; }
    #madrasahConfig .input-group-text { width: 100%; border-radius: 5px !important; margin-bottom: 5px; }
    #madrasahConfig .form-control { width: 100%; border-radius: 5px !important; margin-bottom: 10px; }

    /* 5. MAGIC SCALING UNTUK KARTU (LIST MODE) */
    .id-card {
      transform: scale(0.92); /* Perkecil ke 92% */
      margin-bottom: -15px; /* Hilangkan gap kosong akibat scaling */
    }

    /* --- [TAMBAHAN BARU] PERBAIKAN LIVE PREVIEW SETTING --- */
    
    /* 1. Perkecil padding wadah abu-abu agar lebih lega */
    #previewContainer {
      padding: 1rem !important; /* Timpa p-4 menjadi lebih kecil */
      overflow-x: hidden;       /* Cegah scroll horizontal */
      width: 100%;              /* Pastikan tidak melebihi layar */
    }

    /* 2. Perkecil Kartu Preview (Scale Down) */
    /* Target class .switch-container di dalam #previewContainer */
    #previewContainer .switch-container {
      transform: scale(0.85);       /* Perkecil kartu jadi 85% ukuran asli */
      transform-origin: center top; /* Titik tengah atas agar tetap rapi */
      margin-bottom: -35px;         /* Hapus ruang kosong di bawah akibat scaling */
      margin-left: auto;
      margin-right: auto;
    }
    
    /* Pastikan kartu di dalam switcher tidak kena double scale */
    #previewContainer .switch-container .id-card,
    #previewContainer .switch-container .back-card {
      transform: none !important; 
    }
  }

  /* 1. KOTAK KARTU (Sama persis dengan depan) */
  .back-card {
    width: 335px !important;
    height: 220px !important;
    border: 1px solid #000;
    background: white;
    border-radius: 8px; /* Sudut kartu melengkung */
    overflow: hidden;   /* Memotong header agar ikut melengkung di pojok atas */
    font-family: Arial, sans-serif;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
  }

  /* 2. HEADER DATAR (SAMA PERSIS DENGAN DEPAN) */
  .back-header-flat {
    background-color: #065f28; /* Hijau Madrasah */
    color: white;
    
    /* Ukuran & Padding disamakan dengan .madrasah-header */
    height: 45px; 
    padding: 2px 8px; 
    
    /* Layout Flexbox 3 Kolom (Logo-Teks-Logo) */
    display: flex;
    align-items: center;
    justify-content: space-between;
    
    /* Garis Kuning Lurus (Tidak Melengkung) */
    border-bottom: 2px solid #ffd700; 
    
    flex-shrink: 0;
    z-index: 2;
  }

  /* WADAH LOGO */
  .back-logo-box {
      width: 40px; text-align: center; flex-shrink: 0;
  }
  .back-logo-box img {
      width: 30px; height: auto; display: block; margin: 0 auto;
  }

  /* TEKS HEADER */
  .back-header-text {
      flex: 1; text-align: center; line-height: 1.1;
  }
  .back-header-text h5 { margin: 0; font-size: 7px; font-weight: bold; }
  .back-header-text h4 { margin: 0; font-size: 11px; font-weight: 900; text-transform: uppercase; }
  .back-header-text p { margin: 0; font-size: 6px; }

  /* 3. BODY & FOOTER (Tetap rapi tidak tumpang tindih) */
  .back-body {
    flex: 1;
    padding: 5px 15px 8px 15px;
    display: flex; flex-direction: column; justify-content: space-between;
  }

  .rules-title {
    text-align: center; font-weight: bold; font-size: 10px;
    margin-top: 5px; text-transform: uppercase; text-decoration: underline;
  }

  .rules-list {
    font-size: 7.5px; padding-left: 18px; margin: 5px 0;
    line-height: 1.3; text-align: justify;
  }
  .rules-list li { margin-bottom: 2px; }

  .back-footer {
    font-size: 8px; font-weight: bold; margin-top: 2px;
  }
  .back-footer .row-cp { display: flex; margin-bottom: 1px; }
  .back-footer .lbl { width: 60px; }

  /* --- PERBAIKAN FONT HEADER BELAKANG (AGAR IDENTIK DENGAN DEPAN) --- */
  
  /* 1. Nama Yayasan (Kecil di atas) */
  .back-header-flat .txt-yayasan { 
    font-size: 7px; 
    font-weight: bold; 
    margin-bottom: 1px; 
    color: white;
  }

  /* 2. Nama Sekolah (Besar & Tebal) */
  .back-header-flat .txt-sekolah { 
    font-size: 11px; 
    font-weight: 900; 
    text-transform: uppercase; 
    margin: 0; 
    color: white;
  }

  /* 3. Alamat (Sangat kecil di bawah) */
  .back-header-flat .txt-alamat { 
    font-size: 6px; 
    margin-top: 1px; 
    line-height: 1.2; /* Jarak antar baris alamat rapat */
    color: white;
  }

  /* --- ANIMASI HORIZONTAL SWIPE (GESER SAMPING) --- */

  /* 1. Wadah Utama */
  .switch-container {
    width: 335px;
    height: 220px;
    position: relative;
    margin: 0 auto;
    cursor: pointer;
    perspective: none; /* Tanpa 3D agar teks tajam */
  }

  /* 2. Sisi Kartu (Depan & Belakang) */
  .switch-face {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 8px;
    background-color: white;
    box-shadow: 0 5px 15px rgba(0,0,0,0.15); /* Shadow sedikit lebih besar */
    
    /* Transisi Geser Samping yang Halus (Cubic Bezier) */
    transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
    
    /* Paksa render teks tajam & rata kiri */
    text-align: left !important;
    backface-visibility: hidden; 
  }

  /* Reset margin bawaan */
  .switch-face .id-card, 
  .switch-face .back-card {
    margin: 0 !important;
    box-shadow: none !important;
    transform: none !important;
    border: none !important;
  }

  /* --- KONDISI 1: DEPAN MUNCUL (Default) --- */
  .switch-container .face-front {
    opacity: 1;
    transform: translateX(0) scale(1);
    z-index: 10;
  }
  .switch-container .face-back {
    opacity: 0;
    /* Posisi awal kartu belakang ada di sebelah kanan (+15%) */
    transform: translateX(15%) scale(0.95); 
    z-index: 5;
    pointer-events: none;
  }

  /* --- KONDISI 2: BELAKANG MUNCUL (Aktif) --- */
  .switch-container.show-back .face-front {
    opacity: 0;
    /* Kartu depan geser ke kiri (-15%) saat hilang */
    transform: translateX(-15%) scale(0.95); 
    z-index: 5;
    pointer-events: none;
  }
  .switch-container.show-back .face-back {
    opacity: 1;
    /* Kartu belakang masuk ke tengah */
    transform: translateX(0) scale(1);
    z-index: 10;
    pointer-events: auto;
  }

  /* --- PERBAIKAN ALIGNMENT (TETAP DIPERTAHANKAN) --- */
  .temp-madrasah .data-area table { text-align: left; width: 100%; }
  .temp-madrasah .data-area td { vertical-align: top; }

  /* Contact Person Table */
  .back-footer-container { margin-top: 5px; padding-top: 5px; border-top: 1px dashed #ccc; }
  .cp-title { font-size: 8px; font-weight: bold; text-decoration: underline; margin-bottom: 2px; }
  .cp-table { width: 100%; font-size: 8px; font-weight: bold; border-collapse: collapse; }
  .cp-table td { padding: 0; vertical-align: top; border: none !important; }
  .cp-table td.cp-label { width: 55px; white-space: nowrap; }
  .cp-table td.cp-sep { width: 10px; text-align: center; }
  .cp-table td.cp-val { text-align: left; }

  /* --- PERBAIKAN POSISI CETAK (NEW) --- */
  
  /* Wadah Khusus Baris Cetak */
  .print-row {
    display: flex;
    flex-direction: row;       /* Paksa berjejer ke samping */
    justify-content: center;   /* Rata tengah kertas */
    align-items: flex-start;   /* Rata atas */
    gap: 10px;                 /* Jarak antar kartu Depan & Belakang */
    margin-bottom: 20px;       /* Jarak antar baris siswa */
    break-inside: avoid;       /* Mencegah kartu terpotong pindah halaman */
    page-break-inside: avoid;
  }

  /* --- UPDATE SETTING CETAK (PORTRAIT) --- */
  @media print {
    
    /* 1. UBAH ORIENTASI KERTAS JADI PORTRAIT */
    @page { 
      size: A4 portrait;   /* Paksa mode Portrait */
      margin: 10mm;        /* Margin 1cm di semua sisi */
    }

    /* 2. UPDATE WADAH BARIS */
    .print-row {
      display: flex;
      flex-direction: row;      /* Tetap berjejer ke samping */
      justify-content: center;  /* Rata tengah */
      align-items: flex-start;
      
      /* PERUBAHAN PENTING DI SINI: */
      gap: 2px;                 /* Perkecil jarak agar muat di lebar portrait */
      flex-wrap: nowrap;        /* PAKSA jangan turun baris */
      transform: scale(0.95);   /* Perkecil sedikit (95%) agar aman dari margin printer */
      transform-origin: top center;
      
      margin-bottom: 5px;       /* Jarak antar baris siswa dikurangi karena di-scale */
      break-inside: avoid;
      page-break-inside: avoid;
    }

    /* Reset Container Utama */
    body, #dashboardPage, .container { 
      min-width: 0 !important; 
      width: 100% !important; 
      padding: 0 !important; 
      overflow: visible !important;
    }

    /* Pastikan ukuran kartu tetap, tapi dikendalikan oleh scale di atas */
    .id-card.temp-madrasah, 
    .back-card {
      width: 335px !important;
      height: 220px !important;
      box-shadow: none !important; 
      margin: 0 !important;        
      border: 1px solid #000 !important; 
      /* Pastikan background tercetak */
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }
  }

  /* FLOATING ACTION BAR */
  .floating-action {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(100px); /* Tersembunyi di bawah */
    background-color: #333;
    padding: 10px 20px;
    border-radius: 50px;
    z-index: 9999;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    opacity: 0;
    min-width: 250px;
  }

  /* KELAS AKTIF UNTUK MEMUNCULKAN POP-UP */
  .floating-action.show {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
  }

  /* CHECKBOX DI TABEL */
  .row-check {
    cursor: pointer;
    transform: scale(1.2); /* Memperbesar sedikit checkbox */
  }

  /* --- FIX: RUANG SCROLL BAWAH --- */
  /* Memberikan ruang kosong ekstra di bawah tabel */
  /* agar baris terakhir bisa discroll naik melebihi posisi pop-up */
  #data-pane {
    padding-bottom: 100px !important;
  }

  /* --- EFEK FOTO TABEL --- */
  .thumb-clickable {
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  
  .thumb-clickable:hover {
    transform: scale(1.1); /* Membesar sedikit saat disentuh kursor */
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    z-index: 5;
    position: relative;
  }

  /* --- TAMBAHAN: STYLE UNTUK GENERATE KARTU (SCROLLABLE & PRINT) --- */
  
  /* 1. TAMPILAN LAYAR (HP/PC) */
  .view-card-wrapper {
    width: 100%;
    overflow-x: auto;      
    padding: 15px 10px;
    margin-bottom: 20px;   
    background: #fff;
    border: 1px solid #dee2e6; 
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05); 
    -webkit-overflow-scrolling: touch; 
  }

  .view-card-wrapper .print-row {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;     
    gap: 20px;             
    width: max-content;    
    margin: 0 auto;        
    align-items: center;   
  }

  /* 2. SETTING CETAK (PRINT PDF) - FIX HALAMAN BERIKUTNYA */
  @media print {
    
    /* Atur Margin Kertas Utama */
    @page { 
      size: A4 portrait;
      /* UBAH DISINI: 
         Margin Atas saya set 30mm (3cm). 
         Ini akan berlaku OTOMATIS untuk HALAMAN 1, 2, 3, dst.
      */
      margin: 30mm 10mm 10mm 10mm; 
    }

    body {
      /* Reset padding body karena sudah diatur oleh @page margin */
      padding-top: 0 !important; 
      -webkit-print-color-adjust: exact;
    }

    /* Reset wrapper agar background/border hilang saat print */
    .view-card-wrapper {
      overflow: visible !important;
      border: none !important;
      background: none !important;
      box-shadow: none !important;
      padding: 0 !important;
      
      /* Jarak antar baris siswa */
      display: block !important;
      margin: 0 !important;
      margin-bottom: 15px !important; 
      
      /* Mencegah kartu terpotong ganti halaman */
      break-inside: avoid; 
      page-break-inside: avoid;
    }

    /* Atur baris kartu */
    .view-card-wrapper .print-row {
      display: flex !important;
      flex-direction: row !important;
      justify-content: center !important; 
      
      /* Jarak Kiri-Kanan (Depan - Belakang) */
      gap: 10px !important; 
      
      /* Scale 0.9 agar muat 4 baris ke bawah */
      transform: scale(0.9); 
      transform-origin: top center;
    }
  }

  /* =========================================
     NEW TEMPLATE ENGINE (STYLES 2 - 11)
     ========================================= */

  /* --- LAYOUT DASAR (SKELETON) --- */
  .temp-generic, .temp-generic-back {
    width: 335px !important; 
    height: 220px !important; 
    border-radius: 10px;
    overflow: hidden;
    font-family: 'Segoe UI', Arial, sans-serif;
    position: relative;
    background: white;
    box-shadow: none; /* Reset shadow for print */
    border: 1px solid #ddd;
    display: flex; flex-direction: column;
  }

  /* Header */
  .gen-header {
    height: 50px; display: flex; align-items: center; justify-content: space-between;
    padding: 0 10px; position: relative; z-index: 2;
  }
  .gen-header-text { flex: 1; text-align: center; color: white; text-transform: uppercase; line-height: 1.1; }
  .gen-yayasan { font-size: 7px; font-weight: bold; opacity: 0.9; }
  .gen-sekolah { font-size: 12px; font-weight: 900; letter-spacing: 0.5px; }
  .gen-alamat { font-size: 6px; }
  .logo-sm { width: 35px; height: 35px; object-fit: contain; background: rgba(255,255,255,0.2); border-radius: 50%; padding: 2px;}

  /* Body Front */
  .gen-body { flex: 1; display: flex; padding: 10px 15px; gap: 10px; position: relative; z-index: 2; }
  
  /* Foto Area */
  .gen-photo-box { 
    width: 80px; height: 100px; background: #ddd; border-radius: 4px; 
    position: relative; overflow: hidden; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  .gen-photo-placeholder { 
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
    font-size: 10px; color: #777; font-weight: bold;
  }
  .real-photo { width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; z-index: 5; }

  /* Data Area */
  .gen-data-box { flex: 1; display: flex; flex-direction: column; justify-content: center; }
  .gen-card-title { 
    font-size: 10px; font-weight: bold; text-transform: uppercase; margin-bottom: 5px; 
    border-bottom: 2px solid #ccc; display: inline-block; padding-bottom: 2px;
  }
  .gen-table { width: 100%; font-size: 9px; line-height: 1.3; }
  .gen-table td { vertical-align: top; }
  .alamat-cut { white-space: normal; height: 22px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }

  /* Footer / TTD */
  .gen-footer { height: 50px; position: relative; padding: 0 15px; }
  .gen-ttd-box { 
    position: absolute; right: 15px; bottom: 5px; width: 100px; 
    text-align: center; font-size: 8px; line-height: 1.1; 
  }
  .ttd-sign-wrap { height: 30px; position: relative; z-index: 2; }
  .ttd-sign-wrap img { height: 100%; }
  .ttd-name { font-weight: bold; text-decoration: underline; margin-top: -5px; position: relative; z-index: 2;}
  
  /* Posisi Stempel (Mengambang) */
  .temp-generic .stamp-img { 
    width: 45px; position: absolute; left: -10px; top: 10px; 
    opacity: 0.7; transform: rotate(-10deg); pointer-events: none; z-index: 3;
  }

  /* Back Card Specific */
  .temp-generic-back .rules-box { font-size: 8px; flex: 1; }
  .temp-generic-back .rules-head { font-weight: bold; margin-bottom: 4px; text-decoration: underline; }
  .temp-generic-back ol { padding-left: 15px; margin: 0; text-align: justify; }
  .temp-generic-back .contact-box { font-size: 8px; border-top: 1px dashed #ccc; padding-top: 4px;}
  .temp-generic-back .cp-head { font-weight: bold; }

  /* =========================================
     VARIASI STYLE (2 - 11)
     ========================================= */

  /* --- STYLE 2: MERAH MODERN (FULL REVISI DEPAN & BELAKANG) --- */
  .style-2 {
    border: 1px solid #d32f2f;
    position: relative;
    overflow: hidden; /* Penting agar bar bawah tidak keluar radius */
  }

  /* --- TAMPILAN DEPAN (FRONT) --- */
  .style-2 .gen-header {
    background: linear-gradient(135deg, #b71c1c, #f44336);
    clip-path: polygon(0 0, 100% 0, 100% 85%, 0% 100%); /* Lengkungan Depan */
    height: 65px;
    padding-bottom: 12px;
    display: flex; align-items: center;
  }
  .style-2 .gen-header-text {
    color: white; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
  }
  .style-2 .gen-card-title {
    color: #b71c1c; border-color: #b71c1c; margin-top: 5px;
  }
  /* Fix posisi NIP agar tidak tertutup bar merah */
  .style-2 .gen-ttd-box {
    bottom: 12px !important; right: 15px; z-index: 10;
  }
  .style-2 .ttd-nip {
      color: #000; font-weight: bold; background: rgba(255,255,255,0.8);
  }
  /* Bar Merah Bawah Depan */
  .style-2 .decoration-bar {
    position: absolute; bottom: 0; left: 0; width: 100%; height: 10px;
    background: #b71c1c; z-index: 1;
  }


  /* --- TAMPILAN BELAKANG (BACK) - PERBAIKAN BARU --- */

  /* 1. Menyamakan Header Belakang dengan Depan */
  .style-2.back-card .gen-header {
      background: linear-gradient(135deg, #b71c1c, #f44336); /* Gradient sama */
      clip-path: polygon(0 0, 100% 0, 100% 85%, 0% 100%); /* Lengkungan sama */
      height: 55px; /* Sedikit lebih pendek karena tidak ada logo */
      padding-bottom: 10px;
      border-bottom: none; /* Hapus border bawaan generik */
      align-items: center;
  }
  /* Memastikan teks di header belakang putih dan jelas */
  .style-2.back-card .gen-header-text {
       color: white;
       text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
  }
  .style-2.back-card .gen-sekolah { font-size: 11px; } /* Sedikit perbesar nama sekolah di belakang */

  /* 2. Menambahkan Bar Merah di Bawah Belakang (Menggunakan pseudo-element) */
  .style-2.back-card::after {
      content: "";
      position: absolute;
      bottom: 0; left: 0; width: 100%;
      height: 10px; /* Tinggi sama dengan depan */
      background: #b71c1c; /* Warna sama dengan depan */
      z-index: 1;
  }

  /* 3. Penyesuaian padding konten belakang agar barcode tidak tertutup bar merah */
  .style-2.back-card .back-content {
      padding-bottom: 15px; /* Memberi ruang untuk bar merah di bawah */
  }

  /* STYLE 3: COKELAT (Classic/Batik feel) */
  .style-3 { border: 2px solid #5d4037; background: #efebe9; }
  .style-3 .gen-header { background: #4e342e; border-bottom: 3px solid #d7ccc8; }
  .style-3 .gen-header-text { font-family: serif; }
  .style-3 .gen-card-title { color: #5d4037; font-family: serif; letter-spacing: 1px; }
  .style-3 .gen-photo-box { border-color: #5d4037; }

  /* STYLE 4: DARK MODE (Elegant) - REVISI TTD PUTIH */
  .style-4 { 
      background: #212121; 
      color: #eee; 
      border: 1px solid #000; 
  }
  .style-4 .gen-header { 
      background: #000; 
      border-bottom: 1px solid #333; 
  }
  .style-4 .gen-card-title { 
      color: #ffd700; 
      border-color: #ffd700; 
  }
  .style-4 .gen-photo-box { 
      border-color: #444; 
      background: #333; 
  }
  .style-4 table td { color: #ccc; }
  .style-4 td.fw-bold { color: #fff; }
  .style-4 .back-content { color: #ccc; }

  /* --- [BARU] FILTER KHUSUS AGAR TTD & STEMPEL JADI PUTIH --- */
  /* Logic: Invert membalik warna (Hitam -> Putih), Brightness memperterang */
  .style-4 .stamp-img, 
  .style-4 .sig-img {
      filter: invert(100%) brightness(150%);
      opacity: 0.9; /* Sedikit transparan agar terlihat menyatu dengan background */
  }

  /* STYLE 5: ABU-ABU (Corporate) - REVISI TTD TERTUTUP */
  .style-5 { border: 1px solid #607d8b; }
  .style-5 .gen-header { background: #455a64; }
  
  .style-5 .gen-body { 
      background: linear-gradient(to bottom, #fff, #eceff1); 
      /* Kita turunkan sedikit z-index body agar tidak terlalu dominan */
      z-index: 1; 
  }

  .style-5 .gen-card-title { 
      background: #cfd8dc; padding: 2px 5px; 
      border-radius: 4px; border: none; color: #37474f; 
  }
  
  /* Hiasan bulat di kiri bawah */
  .style-5 .decoration-bar { 
      position: absolute; bottom: 10px; left: 15px; 
      width: 50px; height: 50px; 
      background: rgba(96, 125, 139, 0.1); 
      border-radius: 50%; 
      z-index: 0; 
  }

  /* --- PERBAIKAN UTAMA: Z-INDEX TTD --- */
  /* Kita paksa area Tanda Tangan naik ke layer paling atas (z-index 10) */
  .style-5 .gen-ttd-box {
      position: absolute;
      bottom: 5px; 
      right: 15px;
      z-index: 10 !important; /* Agar di atas background body */
  }

  /* Memastikan teks tanggal terlihat jelas dan kontras */
  .style-5 .ttd-date {
      color: #263238; /* Warna abu gelap */
      font-weight: 600;
  }

  /* --- STYLE 6: BIRU GEOMETRIC (FINAL FIX POSISI FOTO) --- */
  .style-6 { 
      border: 1px solid #1565c0; 
      overflow: hidden; 
      position: relative;
      background: white;
  }

  /* 1. Header Depan */
  .style-6 .gen-header { 
      background: #1565c0; 
      clip-path: polygon(0 0, 100% 0, 100% 85%, 50% 100%, 0 85%); 
      height: 70px; 
      display: flex;
      align-items: flex-start; 
      padding: 5px 10px 0 10px; 
      position: relative;
      z-index: 2;
  }
  .style-6 .gen-header-text {
      color: white !important;
      margin-top: 0; width: 100%; text-align: center; z-index: 3;
  }
  .style-6 .gen-yayasan { font-size: 7px; opacity: 0.9; margin-bottom: 2px; }
  .style-6 .gen-sekolah { font-size: 12px; font-weight: 900; margin-bottom: 2px; }
  .style-6 .gen-alamat { font-size: 7px; }
  .style-6 .logo-sm {
      width: 35px; height: 35px; margin-top: 2px;
      background: rgba(255,255,255,0.1); border-radius: 5px;
  }

  /* 2. BAR BIRU DI BAWAH */
  .style-6::after {
      content: ""; position: absolute; bottom: 0; left: 0; width: 100%; height: 8px; 
      background: #1565c0; z-index: 1;
  }

  /* 3. FOTO LINGKARAN (POSISI DIPERBAIKI) */
  .style-6 .gen-photo-box { 
      border-radius: 50%; 
      width: 75px; height: 75px; 
      border: 3px solid #1565c0; 
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      
      /* POSISI ABSOLUT */
      position: absolute;
      right: 25px; 
      /* UBAH DISINI: Naikkan ke 65px agar menjauh dari TTD */
      top: 65px;   
      margin: 0;
      
      z-index: 5;
      background: white;
  }
  .style-6 .gen-photo-box img.real-photo { object-fit: cover; }

  /* 4. Judul & Data (Kiri) */
  .style-6 .gen-card-title { 
      text-align: left; width: 60%; border: none; color: #0d47a1; 
      font-weight: bold; font-size: 10px; margin-left: 15px; margin-top: 5px;
      border-bottom: 1px solid #eee;
  }
  .style-6 .gen-data-box { 
      width: 60%; text-align: left; font-size: 9px;
      padding-left: 15px; margin-top: 5px;
  }
  .style-6 .gen-table td { padding-bottom: 2px; }

  /* 5. TANDA TANGAN (Tetap di bawah) */
  .style-6 .gen-ttd-box {
      position: absolute;
      right: 12px; 
      bottom: 15px; 
      width: 100px;
      z-index: 10;
      line-height: 1.1; 
  }
  .style-6 .ttd-date { font-size: 7px; margin-bottom: 2px; }
  .style-6 .ttd-jabatan { font-size: 7px; }
  .style-6 .ttd-name { font-size: 7px; margin-top: -2px; }
  .style-6 .ttd-nip { font-size: 7px; }
  .style-6 .stamp-img { width: 40px; top: 0; left: -10px; }


  /* --- REVISI HEADER BELAKANG STYLE 6 (DENGAN LOGO) --- */
  .style-6.back-card .gen-header {
      background: #1565c0; 
      /* Clip path tetap */
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0 85%); 
      height: 60px; 
      
      /* Flexbox layout (Logo - Teks - Logo) */
      display: flex;
      align-items: center;       /* Tengah secara vertikal */
      justify-content: space-between; /* Sebar ke kiri dan kanan */
      
      /* Tambahkan padding agar logo tidak mepet pinggir */
      padding: 0 10px; 
      
      border-bottom: 3px solid #0d47a1; 
  }
  
  /* Pastikan ukuran logo di belakang pas */
  .style-6.back-card .logo-sm {
      width: 30px; height: 30px; /* Sedikit lebih kecil dari depan agar rapi */
      object-fit: contain;
      background: rgba(255,255,255,0.1);
      border-radius: 4px;
  }
  
  .style-6.back-card .gen-header-text { color: white; margin-top: 0; line-height: 1.2; }
  .style-6.back-card .gen-sekolah { font-size: 12px; font-weight: bold; }
  .style-6.back-card .gen-alamat { font-size: 7px; width: 90%; margin: 0 auto; }
  .style-6.back-card::after {
      content: ""; position: absolute; bottom: 0; left: 0; width: 100%; height: 8px;
      background: #1565c0;
  }
  /* Padding bawah dikurangi karena barcode hilang */
  .style-6.back-card .back-content { padding-bottom: 5px; }

  /* STYLE 7: UNGU (Creative) */
  .style-7 { border: 2px solid #7b1fa2; border-radius: 15px; }
  .style-7 .gen-header { background: #7b1fa2; border-radius: 12px 12px 0 0; }
  .style-7 .gen-card-title { color: #7b1fa2; border-bottom: 2px dotted #7b1fa2; }
  .style-7 .gen-footer { background: #f3e5f5; border-radius: 0 0 12px 12px; margin-top: auto; height: 40px; }
  .style-7 .gen-ttd-box { bottom: 2px; }

  /* STYLE 8: ORANGE (Bright) */
  .style-8 { border: 1px solid #e65100; }
  .style-8 .gen-header { background: linear-gradient(90deg, #ff9800, #ef6c00); }
  .style-8 .gen-card-title { background: #fff3e0; color: #e65100; padding: 2px 8px; border-left: 5px solid #ef6c00; border-bottom: none; }
  .style-8 .decoration-bar { position: absolute; right: 0; top: 50px; width: 20px; height: 100%; background: #fff3e0; clip-path: polygon(100% 0, 0 50%, 100% 100%); }

  /* STYLE 9: TEAL (Clean) */
  .style-9 { border: 1px solid #00695c; }
  .style-9 .gen-header { background: #009688; border-bottom: 4px solid #004d40; }
  .style-9 .gen-photo-box { box-shadow: 4px 4px 0 #b2dfdb; border: 1px solid #00695c; }
  .style-9 .gen-card-title { text-align: right; width: 100%; border-bottom: 1px solid #009688; color: #00796b; }
  
  /* STYLE 10: NAVY (Official) */
  .style-10 { border: 2px solid #1a237e; }
  .style-10 .gen-header { background: #1a237e; }
  .style-10 .gen-header-text { letter-spacing: 2px; }
  .style-10 .gen-body { background-image: repeating-linear-gradient(45deg, #e8eaf6 0, #e8eaf6 1px, transparent 0, transparent 50%); background-size: 10px 10px; }
  .style-10 .gen-data-box { background: rgba(255,255,255,0.9); padding: 5px; border: 1px solid #c5cae9; }

  /* STYLE 11: MAROON (Formal) */
  .style-11 { border: 5px solid #880e4f; border-radius: 0; }
  .style-11 .gen-header { background: #880e4f; }
  .style-11 .gen-footer { border-top: 1px solid #880e4f; height: 40px; }
  .style-11 .gen-card-title { font-family: 'Times New Roman', serif; font-weight: bold; font-style: italic; color: #880e4f; border-bottom: 2px double #880e4f; }

  /* --- FIX PRINT FOR ALL STYLES --- */
  @media print {
    .temp-generic, .temp-generic-back { 
      -webkit-print-color-adjust: exact !important; 
      print-color-adjust: exact !important;
      border: 1px solid #999 !important; /* Pastikan border tercetak */
      margin: 0 !important;
    }
    /* Pastikan background gradient tercetak */
    .style-2 .gen-header, .style-8 .gen-header { -webkit-print-color-adjust: exact; }
  }

  /* =========================================
     NEW TEMPLATE BATCH (STYLES 12 - 21)
     ========================================= */

  /* --- STYLE 12: CYBER / TECH (Futuristik) --- 
     Ciri: Sudut terpotong tajam, warna neon cyan/hitam, font monospace */
  .style-12 { border: 2px solid #000; background: #0d0d0d; color: #00e5ff; font-family: 'Courier New', monospace; }
  .style-12 .gen-header { background: #000; border-bottom: 2px solid #00e5ff; height: 55px; }
  .style-12 .gen-header-text { color: #00e5ff; text-shadow: 0 0 5px #00e5ff; letter-spacing: 2px; }
  .style-12 .gen-photo-box { border: 2px solid #00e5ff; box-shadow: 0 0 10px rgba(0, 229, 255, 0.3); border-radius: 0; background: #000; }
  .style-12 .gen-card-title { border: 1px solid #00e5ff; background: rgba(0, 229, 255, 0.1); color: #fff; padding: 2px 5px; }
  .style-12 table td { color: #ccc; }
  .style-12 td.fw-bold { color: #00e5ff; }
  /* Dekorasi Chip */
  .style-12 .decoration-bar { 
     position: absolute; bottom: 10px; right: 10px; width: 40px; height: 20px; 
     border: 1px solid #333; background: repeating-linear-gradient(90deg, #333 0, #333 2px, transparent 2px, transparent 4px);
  }
  .style-12.back-card { background: #111; color: #ccc; }
  .style-12.back-card .gen-header { border-bottom-style: dashed; }

  /* --- STYLE 13: EMERALD (Nature/Leaf) --- 
     Ciri: Sudut melengkung seperti daun (kiri atas & kanan bawah), hijau segar */
  .style-13 { border: none; border-radius: 30px 0 30px 0; box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 1px solid #81c784; overflow: hidden; }
  .style-13 .gen-header { background: linear-gradient(to right, #2e7d32, #66bb6a); border-radius: 28px 0 50% 0; height: 60px; }
  .style-13 .gen-photo-box { border-radius: 15px 0 15px 0; border: 3px solid #a5d6a7; }
  .style-13 .gen-card-title { color: #2e7d32; border-bottom: 2px solid #81c784; font-style: italic; }
  .style-13 .gen-footer { background: #e8f5e9; border-radius: 50% 0 28px 0; }
  .style-13.back-card { border-radius: 0 30px 0 30px; }

  /* --- STYLE 14: BLACK & GOLD (Luxury) --- 
     Ciri: Hitam pekat dan Emas, sangat elegan, border ganda */
  .style-14 { border: 4px double #d4af37; background: #1a1a1a; color: #f2f2f2; }
  .style-14 .gen-header { background: linear-gradient(180deg, #d4af37, #aa8c2c); border-bottom: 2px solid #fff; height: 50px; }
  .style-14 .gen-header-text { color: #000; text-shadow: none; font-weight: 900; font-family: 'Times New Roman', serif; }
  .style-14 .gen-photo-box { border: 2px solid #d4af37; background: #000; }
  .style-14 .gen-card-title { color: #d4af37; border-bottom: 1px solid #d4af37; font-family: serif; letter-spacing: 1px; }
  .style-14 table td { color: #e0e0e0; }
  .style-14 td.fw-bold { color: #d4af37; }
  .style-14.back-card { background: #1a1a1a; color: #d4af37; }
  .style-14.back-card .rules-box, .style-14.back-card .contact-box { border-color: #555; }

  /* --- STYLE 15: RETRO PAPER (Vintage) --- 
     Ciri: Background krem/kertas, font klasik, border putus-putus */
  .style-15 { background: #fdf5e6; border: 2px dashed #8d6e63; color: #5d4037; }
  .style-15 .gen-header { background: #d7ccc8; border-bottom: 2px dashed #8d6e63; height: 50px; }
  .style-15 .gen-header-text { color: #3e2723; font-family: 'Georgia', serif; }
  .style-15 .gen-photo-box { border: 5px solid #fff; box-shadow: 2px 2px 5px rgba(0,0,0,0.2); transform: rotate(-2deg); }
  .style-15 .gen-card-title { background: #8d6e63; color: #fff; transform: rotate(1deg); display: inline-block; padding: 2px 10px; box-shadow: 2px 2px 0 #3e2723; border: none; }
  .style-15.back-card { background: #fdf5e6; }

  /* --- STYLE 16: INDIGO (Wave Header) --- 
     Ciri: Header berbentuk gelombang laut, warna biru-ungu */
  .style-16 { border: 1px solid #3949ab; }
  .style-16 .gen-header { 
      background: #3949ab; height: 70px; 
      clip-path: polygon(0 0, 100% 0, 100% 70%, 50% 100%, 0 70%); 
      align-items: flex-start; padding-top: 5px;
  }
  .style-16 .gen-header-text { padding-top: 5px; }
  .style-16 .gen-photo-box { border-radius: 50%; width: 85px; height: 85px; border: 3px solid #3949ab; margin-top: 5px; background: #fff; }
  .style-16 .gen-body { flex-direction: column; align-items: center; padding-top: 0; }
  .style-16 .gen-data-box { width: 100%; text-align: center; margin-top: 5px; }
  .style-16 .gen-table { width: 100%; text-align: left; }
  .style-16 .gen-card-title { display: block; text-align: center; color: #283593; font-weight: 800; border: none; font-size: 11px; }

  /* --- STYLE 17: CRIMSON (Aggressive) --- 
     Ciri: Header miring tajam (slash), merah & hitam */
  .style-17 { border: 2px solid #b71c1c; }
  .style-17 .gen-header { 
      background: linear-gradient(45deg, #b71c1c 80%, #000 80%); 
      height: 60px; clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%);
  }
  .style-17 .gen-photo-box { border: 2px solid #b71c1c; box-shadow: 3px 3px 0 #000; }
  .style-17 .gen-card-title { border-left: 5px solid #b71c1c; padding-left: 8px; color: #b71c1c; font-weight: 900; font-size: 12px; border-bottom: none; }
  .style-17 .decoration-bar { position: absolute; top: 0; right: 0; width: 30px; height: 30px; background: #000; clip-path: polygon(100% 0, 0 0, 100% 100%); }

  /* --- STYLE 18: MINIMALIST BORDER (Clean) --- 
     Ciri: Putih bersih, hanya main di border tebal warna-warni di sisi kiri */
  .style-18 { border: 1px solid #ddd; border-left: 15px solid #00acc1; }
  .style-18 .gen-header { background: #fff; border-bottom: 2px solid #00acc1; height: 45px; }
  .style-18 .gen-header-text { color: #333; }
  .style-18 .logo-sm { background: none; border: none; }
  .style-18 .gen-photo-box { border: 1px solid #ccc; background: #f5f5f5; }
  .style-18 .gen-card-title { color: #00acc1; text-transform: uppercase; letter-spacing: 2px; border-bottom: 1px solid #eee; }
  .style-18 .gen-footer { border-top: 1px solid #eee; background: #f9f9f9; }
  .style-18.back-card { border-left: 15px solid #00acc1; }

  /* --- STYLE 19: PASTEL PINK/BLUE (Soft/Kids) --- 
     Ciri: Warna lembut, sudut rounded banget, font ceria */
  .style-19 { border: 2px solid #f8bbd0; border-radius: 15px; background: #fff; }
  .style-19 .gen-header { background: #f8bbd0; border-radius: 12px 12px 50% 50% / 12px 12px 20px 20px; height: 55px; }
  .style-19 .gen-header-text { color: #880e4f; font-weight: bold; }
  .style-19 .gen-photo-box { border: 3px solid #b3e5fc; border-radius: 10px; }
  .style-19 .gen-card-title { color: #ec407a; border: 2px dashed #b3e5fc; border-radius: 20px; padding: 2px 10px; text-align: center; }
  .style-19 .gen-footer { background: #e1f5fe; border-radius: 0 0 12px 12px; height: 35px; }
  .style-19.back-card { background: #fff9c4; border-color: #fff176; }

  /* --- STYLE 20: HEXAGON (Polygon Style) --- 
     Ciri: Header bentuk trapesium terbalik, warna kuning/hitam (Konstruksi/Teknik) */
  .style-20 { border: 2px solid #333; }
  .style-20 .gen-header { 
      background: #fbc02d; color: #000; height: 65px;
      clip-path: polygon(0 0, 100% 0, 85% 100%, 15% 100%); 
      padding: 0 35px; /* Kompensasi clip-path */
  }
  .style-20 .gen-header-text { color: #000; font-weight: 900; }
  .style-20 .gen-photo-box { clip-path: polygon(10% 0, 100% 0, 100% 90%, 90% 100%, 0 100%, 0 10%); border: none; background: #ccc; }
  .style-20 .gen-card-title { background: #333; color: #fbc02d; padding: 2px 10px; transform: skewX(-15deg); display: inline-block; }
  .style-20.back-card .gen-header { background: #333; color: #fbc02d; }

  /* --- STYLE 21: FULL GRADIENT (Modern Art) --- 
     Ciri: Background full gradient dari atas sampai bawah, teks putih */
  .style-21 { border: none; background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; }
  .style-21 .gen-header { background: rgba(255,255,255,0.1); border-bottom: 1px solid rgba(255,255,255,0.2); }
  .style-21 .gen-photo-box { border: 3px solid rgba(255,255,255,0.5); background: transparent; }
  .style-21 .gen-card-title { border-bottom: 1px solid rgba(255,255,255,0.5); color: #fff; }
  .style-21 table td, .style-21 .gen-yayasan, .style-21 .gen-alamat { color: #eee; }
  .style-21 .ttd-name { color: #fff; }
  .style-21.back-card { background: linear-gradient(135deg, #2575fc 0%, #6a11cb 100%); color: #fff; }
  .style-21.back-card .contact-box { border-top-color: rgba(255,255,255,0.3); }

  /* --- PRINT FIX UTAMA --- */
  @media print {
    /* Pastikan background rumit ini tercetak */
    .style-12, .style-13, .style-14, .style-15, .style-16, 
    .style-17, .style-18, .style-19, .style-20, .style-21 {
       -webkit-print-color-adjust: exact !important; 
       print-color-adjust: exact !important;
    }
  }

</style>
